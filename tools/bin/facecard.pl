#!/usr/bin/perl -s
# =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
# DD Poker - Source Code
# Copyright (c) 2003-2025 Doug Donohoe
# 
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
# 
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
# 
# For the full License text, please see the LICENSE.txt file
# in the root directory of this project.
# 
# The "DD Poker" and "Donohoe Digital" names and logos, as well as any images, 
# graphics, text, and documentation found in this repository (including but not
# limited to written documentation, website content, and marketing materials) 
# are licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 
# 4.0 International License (CC BY-NC-ND 4.0). You may not use these assets 
# without explicit written permission for any uses not covered by this License.
# For the full License text, please see the LICENSE-CREATIVE-COMMONS.txt file
# in the root directory of this project.
# 
# For inquiries regarding commercial licensing of this source code or 
# the use of names, logos, images, text, or other assets, please contact 
# doug [at] donohoe [dot] info.
# =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=


$DEVDIR = "$ENV{WORK}/ddpoker";
$IMGDIR = "$DEVDIR/image-src/poker/cards";
$SRCDIR = "$DEVDIR/arch/java/com/donohoedigital/games/poker";
$SRCFILE = "$SRCDIR/FaceCards.java";

@IMAGES =  (
			'J_Clubs',
			'J_Diamonds',
			'J_Hearts',
			'J_Spades',
			'K_Clubs',
			'K_Diamonds',
			'K_Hearts',
			'K_Spades',
			'Q_Clubs',
			'Q_Diamonds',
			'Q_Hearts',
			'Q_Spades',
			'Style_Jack_Clubs_Blk',
			'Style_Jack_Clubs_Grn',
			'Style_Jack_Diamonds_Blue',
			'Style_Jack_Diamonds_Red',
			'Style_Jack_Hearts',
			'Style_Jack_Spades',
			'Style_King_Clubs_Blk',
			'Style_King_Clubs_Grn',
			'Style_King_Diamonds_Blue',
			'Style_King_Diamonds_Red',
			'Style_King_Hearts',
			'Style_King_Spades',
			'Style_Queen_Clubs_Blk',
			'Style_Queen_Clubs_Grn',
			'Style_Queen_Diamonds_Blue',
			'Style_Queen_Diamonds_Red',
			'Style_Queen_Hearts',
			'Style_Queen_Spades'
			);


open (SRC, ">$SRCFILE") || die "Couldn't open $SRCFILE";
print SRC "package com.donohoedigital.games.poker;\n";
print SRC "\n";
print SRC "import com.donohoedigital.gui.*;\n";
print SRC "\n";
print SRC "/** This was generated by $0 - do not modify **/\n";
print SRC "\n";
print SRC "public class FaceCards extends BasicSVG\n";
print SRC "{\n";

foreach $name (@IMAGES)
{
	$IMGFILE = "$IMGDIR/$name.svg";
	print "Processing: $IMGFILE\n";

	print SRC "    public static FaceCards $name = create_$name();\n";
	print SRC "    private static FaceCards create_$name()\n";
	print SRC "    {\n";
	print SRC "        FaceCards card = new FaceCards();\n";

	$path = "";
	$null = "null";
	$black = "\"#000000\"";
	$output = false;
	open (PATHS, "$IMGFILE") || die "Couldn't open $IMGFILE";
	while ($line = <PATHS> )
	{
		chop $line;
		$line =~ s/\s//g;

		if ($line =~ "\<path")
		{
			# get fill
			$black =~ /(\"#000000\")/; #default to black
			$line =~ /fill=(\"[#a-zA-Z0-9]+\")/;
			$fill = $1;
			if ($fill =~ "none") { $fill = "null";  }
	
			# get stroke
			$null =~ /(null)/; # default to null
			$line =~ /stroke=(\"[#a-zA-Z0-9]+\")/;
			$stroke = $1;
	
			# remove extra data
			$line =~ s/.*d=//;
			$path = $line;
		}
		elsif ($path ne "")
		{
			$path .= $line;
		}
		else
		{
			$path = "";
		}
	
		if ($path  =~ "\"\/\>")
		{
			$path =~ s/\/\>//;
			print "fill=$fill,  stroke=$stroke, path=$path\n";
			print SRC "        card.addPath($fill, $stroke, $path);\n";
			$path = "";
		}
	}
	
	print SRC "        card.calculateBounds();\n";
	print SRC "        return card;\n";
	print SRC "    }\n";
	print SRC "\n";
}

print SRC "}\n";
print SRC "\n";

close(SRC);
